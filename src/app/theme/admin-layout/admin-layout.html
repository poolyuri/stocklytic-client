<div class="app-container-wrap"
  [class.app-sidenav-collapsed]="options.sidenavCollapsed && options.navPos !== 'top'"
  [class.app-navbar-side]="options.navPos === 'side'"
  [class.app-navbar-top]="options.navPos === 'top'"
  [class.app-header-above]="options.headerPos === 'above'"
  [class.app-header-fixed]="options.headerPos === 'fixed'"
     [dir]="options.dir || 'ltr'">

  <ng-progress ngProgressRouter />

  @if (options.showHeader && options.headerPos==='above') {
    <!-- Header Above -->
    <app-header #header
                (toggleSidenav)="sidenav.toggle()"
                (toggleSidenavNotice)="sidenavNotice.toggle()"
                [showBranding]="true">
    </app-header>
  }

  <mat-sidenav-container class="app-container" autosize autoFocus>
    <mat-sidenav #sidenav class="app-sidenav"
                 [mode]="isOver ? 'over' : 'side'"
                 [opened]="options.navPos === 'side' && options.sidenavOpened && !isOver"
                 (openedChange)="onSidenavOpenedChange($event)"
                 (closedStart)="onSidenavClosedStart()">
      <app-sidebar [showToggle]="!isOver"
                   [showUser]="options.showUserPanel ?? false"
                   [showHeader]="options.headerPos!=='above'"
                   (toggleCollapsed)="toggleCollapsed()"
                   [toggleChecked]="options.sidenavCollapsed ?? false">
      </app-sidebar>
    </mat-sidenav>

    <mat-sidenav #sidenavNotice position="end" mode="over">
    </mat-sidenav>

    <mat-sidenav-content #content class="app-content">
      @if (options.showHeader && options.headerPos!=='above') {
        <!-- Header Fixed -->
        <app-header #header
                  [showToggle]="!options.sidenavCollapsed && options.navPos!=='top'"
                  [showBranding]="options.navPos==='top'"
                  (toggleSidenav)="sidenav.toggle()"
                  (toggleSidenavNotice)="sidenavNotice.toggle()">
        </app-header>
      }

      @if (options.navPos === 'top') {
        <app-topmenu />
      }

      <main class="app-page-content" [@routeAnimations]="getRouterOutletState(o)">
        <router-outlet #o="outlet">
        </router-outlet>
      </main>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
